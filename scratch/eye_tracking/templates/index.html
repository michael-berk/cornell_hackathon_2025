<!DOCTYPE html>
<html>
<head>
    <script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
    <style>
        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        .section {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }
        .red { background-color: red; }
        .yellow { background-color: yellow; color: black; }
        .orange { background-color: orange; }
        #textbox {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            font-size: 18px;
            background: white;
            border: 2px solid black;
            border-radius: 5px;
            font-weight: bold;
        }
        #gaze-point {
            position: absolute;
            width: 10px;
            height: 10px;
            background: blue;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div id="red" class="section red">RED</div>
    <div id="yellow" class="section yellow">YELLOW</div>
    <div id="orange" class="section orange">ORANGE</div>
    <div id="textbox">Looking at: None</div>
    <div id="gaze-point"></div>

    <script>
        const gazePoint = document.getElementById('gaze-point');
        const textbox = document.getElementById('textbox');

        WebGazer.setGazeListener((data) => {
            if (data) {
                // Update gaze point position
                gazePoint.style.left = `${data.x - 5}px`; // Center the point
                gazePoint.style.top = `${data.y - 5}px`;

                // Determine which section the gaze is on
                const y = data.y;
                const height = window.innerHeight;
                const redHeight = height / 3;
                const yellowHeight = 2 * height / 3;

                let section = 'None';
                if (y < redHeight) {
                    section = 'Red';
                } else if (y < yellowHeight) {
                    section = 'Yellow';
                } else {
                    section = 'Orange';
                }

                // Update the textbox
                textbox.textContent = `Looking at: ${section}`;
            }
        }).begin();

        // Ensure webcam permissions and start WebGazer
        WebGazer.begin();
        WebGazer.showPredictionPoints(true); // Optional: Visualize WebGazer's detection points
    </script>
</body>
</html>
